<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.kh.test.dao.BoardDAO">
	<select id="selectBoardTypeByAuth" resultType="kr.kh.test.vo.BoardTypeVO">
		select * from board_type where #{i} >=bt_w_authority 
	</select>
  	<insert id="insertBoardCommon" useGeneratedKeys="true" keyProperty="bo.bo_num">
  		insert into board(bo_num, bo_title, bo_content,  bo_ori_num, bo_me_id, bo_bt_num)
  		select ifnull(max(bo_num), 0)+1, #{bo.bo_title}, #{bo.bo_content},  ifnull(max(bo_num), 0)+1, #{bo.bo_me_id}, #{bo.bo_bt_num} 
  		from board 
  	</insert>
  	<insert id="insertFileInfo">
  		insert into file(fi_ori_name, fi_name, fi_bo_num) value(#{fi.fi_ori_name}, #{fi.fi_name}, #{fi.fi_bo_num})
  	</insert>
</mapper>
